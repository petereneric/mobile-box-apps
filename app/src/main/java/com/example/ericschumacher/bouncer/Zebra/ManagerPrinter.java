package com.example.ericschumacher.bouncer.Zebra;

import android.content.Context;
import android.content.SharedPreferences;
import android.util.Log;
import android.widget.Toast;

import com.example.ericschumacher.bouncer.Constants.Constants_Intern;
import com.example.ericschumacher.bouncer.Objects.Additive.Battery;
import com.example.ericschumacher.bouncer.Objects.Article;
import com.example.ericschumacher.bouncer.Objects.Collection.Box;
import com.example.ericschumacher.bouncer.Objects.Device;
import com.example.ericschumacher.bouncer.R;
import com.example.ericschumacher.bouncer.Utilities.Utility_Toast;
import com.zebra.sdk.btleComm.BluetoothLeConnection;
import com.zebra.sdk.comm.Connection;
import com.zebra.sdk.comm.ConnectionBuilder;
import com.zebra.sdk.comm.ConnectionException;
import com.zebra.sdk.printer.PrinterStatus;
import com.zebra.sdk.printer.ZebraPrinter;
import com.zebra.sdk.printer.ZebraPrinterFactory;
import com.zebra.sdk.printer.ZebraPrinterLanguageUnknownException;
import com.zebra.sdk.printer.ZebraPrinterLinkOs;

import java.util.ArrayList;

public class ManagerPrinter {

    private static final String IP_PRINTER_FIVE = "10.128.100.114";
    private static final String IP_PRINTER_FOUR = "10.128.100.112";

    ZebraPrinter Printer;
    private Connection Connection;
    Context Context;
    SharedPreferences SharedPreferences;

    boolean bUsePrinter;

    public ManagerPrinter(Context context) {
        Context = context;
        SharedPreferences = context.getSharedPreferences(Constants_Intern.SHARED_PREFERENCES, 0);
        //connect();

    }

    public void disconnect() {
        new Thread(new Runnable() {
            public void run() {

                try {
                    if (Connection != null) {
                        Connection.close();
                    }
                } catch (ConnectionException e) {
                    e.printStackTrace();
                }
            }
        }).start();

    }

    public void printDeviceId(Device device) {
        printLabel(getDeviceLabel(device));

        /*
        if (usePrinter(Context) && Connection != null) {
            try {
                if (Printer != null && readyToPrint()) {
                    Connection.write(getDeviceLabel(device));
                    Log.i("What", "should work");
                }
            } catch (ConnectionException e1) {
                Log.d("JOOO", "Error sending file to printer");
            }
        }
        */
    }

    public void printDeviceSku(Article oArticle, Device oDevice) {
        printLabel(getDeviceSku(oArticle, oDevice));
    }

    public void printBattery(Battery battery) {
        printLabel(getBatteryLabel(battery));
    }

    public void printBox(Box oBox) {
        if (usePrinter(Context) && Connection != null) {
            try {
                if (Printer != null && readyToPrint()) {
                    Connection.write(getBoxLabel(oBox));
                    Log.i("What", "should work");
                }
            } catch (ConnectionException e1) {
                Log.d("JOOO", "Error sending file to printer");
            }
        }
    }

    public void printTextdhl(String zplII) {
        if (usePrinter(Context) && Connection != null) {
            try {
                if (Printer != null && readyToPrint()) {
                    Connection.write(zplII.getBytes());
                    Log.i("What", "should work");
                }
            } catch (ConnectionException e1) {
                Log.d("JOOO", "Error sending file to printer");
            }
        }
    }

    private byte[] getDhlLabel() {
        String label = "\\u0010CT~~CD,~CC^~CT~\\n\" +^XA^FT164,42^A0N,,40^FDDHL PAKET^FS^FT163,42^A0N,,40^FDDHL PAKET^FS^FT0,71^A0N,,15^FDCommon Label PLG@DHL Business Portal^FS^FO559,24^IMR:dhllg1.GRF^FS^FO0,79^GB791,0,2,B^FS^FT0,104^A0N,,17^FDVon:^FS^FT0,104^A0N,,17^FDVon:^FS^FO69,84^GFA,2128,2128,76,000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c0000e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007c00f0000c00386000001ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c01c0000c00386000000618000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c01c0000c0038600000060c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001602c0000c0000600000060c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001602c0000c0000600000060c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001706c0780cf07060f800060c0783ef000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001304c1860f1830618c0006181861c6000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001384c1860c1c3061060007f01860e4000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001188c3030c0c30630600061c303068000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001188c3030c0c3063fe1f060e3030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011d8c3030c0c3063001f06063030380000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010d0c3030c0c3063000006063030380000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010f0c3030c0c30630000060630304c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001060c1860c1830618200060618604e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001060c1860e383061c400061c186086000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007c43f0f80be07df8f8001ff80f83cf800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000^FS^FO69,111^GFA,2128,2128,76,0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e0000000000000000000380000000000000000000003800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007e1f800000000600000000000000000001800000003fe000000000001800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001806000000000600000000000000000001800000000c7000000000001800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001806000000000600000000000000000001800000000c3800000080001800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001806000000000600000000000000000001800000000c1800000080001800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001806000000000600000000000000000001800000000c180000018000180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000180607e3cf80fe3e3cf03f1e78f0f3c78183e0e6000c181e0737f0fc18000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000018060c70f1c18e0c190863879f383cf9c186306e000c18618371818e1800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001ffe1830c0c3060c1308c1860c183060c1841870000c30618381830618000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000018060830c0c6060e130041860c183060c18c1860000c70c0c301810618000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000018060070c0c6060623e003860c183060c18ff8603e0fc0c0c301800e180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000180603b0c0c6060720f81d860c183060c18c00603e0c00c0c301807618000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000018060c30c0c60603203c61860c183060c18c0060000c00c0c301818618000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000018061830c0c60603420cc1860c183060c18c0060000c00c0c301830618000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000018061830c0c70601c20cc1860c183060c1860860000c00618301830618000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000018061c70c0c38e018318e3860c183060c1871060000c00618301838e1800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007e1f8fbff3f1f78181f07dffbf7efdfbf7e3e1f8003f003e0fc0f1f7fe0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000^FS^FO69,138^GFA,2128,2128,76,0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000fc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fc3e0000000006000000000000000000001f0000000018600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030080000000006000000000000000000006180000000183000003e03e03e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003008000000000600000000000000000000c0820000003030000063063063000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003818000000000600000000000000000000c08200000030300000e18c18e1800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001810000000000600000000000000000000c00600000030600000418c18418000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000018103c03ec3e060f03f1e7c0fb0f839800e01fce61f831807c00018c1801800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c20c3063c630610863878e18f18c1b800780606e31c3300c60001863001800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c20c30c184186308c186063061061c0003e0607060c330083000303e003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c21818c18c186300418606306306180000f8606020c3381830002061802000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e41818c18ff863e00386063063fe180f803c606001c31e1ff00040c0c04000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000641818630c0060f81d860618c300180f801c60600ec30f18000180c0c180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006418183e0c00603c6186060f83001800080c606030c30398000300c0c30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000781818400c00620cc186061003001800080c606060c30198000600c0c60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000380c30c00608620cc1860630018218000c0c606060c3018c100408c0c40800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000380c30ff07106318e386063fc1c418000e18606071c3318e200ff8618ff8000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001007c07fc3e1f9f07dff9f9ff0f87e0003e03df83effdf07c00ff83f0ff80000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000061c00000000000001870000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0c00000000000003030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0c00000000000003030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e18000000000000038600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003f000000000000000fc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000^FS^FO69,165^GFA,2128,2128,76,0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000038000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003f1f1981800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003f80f01f01f03f800c081981800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003f81983183183f800c1019818000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020030c60c70c20000c2000018000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020020460c20c20000c4000018000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020060660c00c20000c800f019e7c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002f060631800c2f000d0030c1878e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003186061f001831800f0030c18606000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c60630c01001c00f8060618606000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c60660602000c00dc060618606000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c6066060c000c00ce060618606000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c60660618000c00c7060618606000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040c20460630040c00c7060618606000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000061830c60620461800c3830c18606000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000071819830c7fc71800c1c30c1860600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003e00f01f87fc3e003f0f1f07ff9f80000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000^FS^FO69,193^GFA,2128,2128,76,0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003f800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c1c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000180c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000300400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000f839bcf1e03f1e7c7c780000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600018c1b8f3e7063878e1830000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060001061c0c1830c18606182000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000306180c18304186061c200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000603f3fe180c18300386060c400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600c300180c18301d86060e400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000700c300180c183061860606400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000300c300180c1830c1860606800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000380c182180c1830c18606038000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c0c1c4180c1830e386060300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007f00f87e3f7efc7dff9f830000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000^FS^FT607,104^A0N,,20^FDKontakt Absender:^FS^FT607,124^A0N,,20^FDEric Schumacher^FS^FT607,144^A0N,,18^FDTel.: 0221-168930-45^FS^FT8,256^A0N,,17^FDAn:^FS^FT8,256^A0N,,17^FDAn:^FS^FO0,230^GB0,32,2,B^FS^FO1,229^GB32,0,2,B^FS^FO571,230^GB0,32,2,B^FS^FO540,229^GB32,0,2,B^FS^FO0,416^GB0,32,2,B^FS^FO1,447^GB32,0,2,B^FS^FO571,416^GB0,32,2,B^FS^FO540,447^GB32,0,2,B^FS^FO69,228^GFA,2542,2542,62,000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003e00000000000000000000000000003e00000000000000000000000000000000000000000000000000000000000000000000000000000003f800000000000e000007ffe00000000000000000000e0000000000000000000000000000000000000000000000000000000000000000000000000000000e1e00000000000e000000e0700000000000000000000e0000000000000000000000000000000000000000000000000000000000000000000000000000001c0600000000000e000000e0380000000000000000000e000000000000000000000000000000000000000000000000000000000000000000000000000000180601000000000e010000e01c0000000000000000000e000000000000000000000000000000000000000000000000000000000000000000000000000000380203000000000e030000e01c0000000000000000000e000000000000000000000000000000000000000000000000000000000000000000000000000000380203000000000e030000e01c0000000000000000000e000000000000000000000000000000000000000000000000000000000000000000000000000000380007000000000e070000e01c0000000000000000000e0000000000000000000000000000000000000000000000000000000000000000000000000000003c001ff01f8007fe1ff000e018071c07e03c0781c3e00e00fc007e703f0000000000000000000000000000000000000000000000000000000000000000001e00070071c01c3e070000e0381f3c1c707c0f87cff00e038e01c7f0e18000000000000000000000000000000000000000000000000000000000000000001fc00700e0e0381e070000e0f0077c38381c0381f0f80e0707038380c1c000000000000000000000000000000000000000000000000000000000000000000ff00700c0e0700e070000ffc0079830381c0381e0780e06070701c180e0000000000000000000000000000000000000000000000000000000000000000003fc0700c0e0600e070000e0f8070030381c0381c0380e06070701c380e0000000000000000000000000000000000000000000000000000000000000000000fe070000e0e00e070000e03c070000381c0381c0380e00070701c380e00000000000000000000000000000000000000000000000000000000000000000003e070003e0e00e070000e01c070000f81c0381c0380e001f0701c3ffe00000000000000000000000000000000000000000000000000000000000000000000f07003ce0e00e070000e00e07000f381c0381c0380e01e703838380000000000000000000000000000000000000000000000000000000000000000000000f0700e0e0e00e070000e00e070038381c0381c0380e070703c7038000000000000000000000000000000000000000000000000000000000000000000020070701c0e0e00e070000e00e070070381c0381c0380e0e0700fc038000000000000000000000000000000000000000000000000000000000000000000020070701c0e0e00e070000e00e070070381c0381c0380e0e070180038000000000000000000000000000000000000000000000000000000000000000000030070701c0e0700e070000e00e070070381c0381c0380e0e07030001c020000000000000000000000000000000000000000000000000000000000000000030060701c0e0781e070000e01c070070381e0781c0380e0e07078001c0600000000000000000000000000000000000000000000000000000000000000000380e0781e1f07c3e078000e01c0700787c1f0f81c0380e0f0f83ff81f0c000000000000000000000000000000000000000000000000000000000000000003c1c07f8fefc3fee07f800f07807003fbf0ff381c0380e07f7e3ffe0ff80000000000000000000000000000000000000000000000000000000000000000007f001e078780f8f81e007ffe01fe01e1e07c3e7f9fe3f83c3c0ffe03e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000381f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000700e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003c1c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fe000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000^FS^FO69,268^GFA,2542,2542,62,00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000038000000000000000000000000007038000000000000001c00000000000000000000000003f8000000000000000000000000000000000000000000000000f800000000000000000000000001f0f8000000000000007c000000000000000000000000061c00000000007fc0ff8000000000000000000000003fe0000038000000000000000000000038007038000000000000001c00000000003f8000000000000c0e00000001f80e001c0000000000000000000000000700000038000000000000000000000078007038000000000000001c0000000000e1e000000000001c07000000071c0e001c0000000000000000000000000700000038000000000000000000000078007038000000000000001c0000400001c060100000000018070000000e0e0e001c000000000000000000000000070000003800000000000000000000007c007038000000000000001c0000c000018060300000000038070000000e070e001c00000000000000000000000007000000380000000000000000000000dc007038000000000000001c0000c000038020300000000038070000001c070e001c000000000000000000000000070000003800000000000000000000009c007038000000000000001c0001c0000380207000000000380e0000000c070e001c00fc038e3ffe03f8007e700007003f80387c007e01c3e01c3e0000008e007038f8071c07e003f81c3e07fc0003c001ff0e380fc0383000fc0000070e001c03860f9e381c060e01c7f000070060e039fe01c707cff07cff0000018e00703bfc1f3c1c30061c1cff01c00003c000703e7838e0386003860000070e001c030703be30380c07038380000700c0703e1f038381f0f81f0f8000010e00703e1e077c18380c0e1f0f81c00001f000700ef8707038e003070000070e001c060383c020781c070701c0000701c0703c0f030381e0781e078000030700703c0e0780301c1c0e1e0781c00000fe00700f00607038e0060380000e0ffffc0e03838020f018038701c000070180383807030381c0381c03800003070070380f0700701c18001c0381c000007f80700e00607038f00e0380001c0e001c0e03838000e038038701c000070380383807000381c0381c0380000207007038070700701c38001c0381c000001fc0700e00007038f80e038000180e001c0fff838001c038038701c000070380383807000f81c0381c03800007ff8070380707007ffc38001c0381c0000007e0700e0001f0387c0fff8000300e001c0e00038003c03803838383fc07038038380700f381c0381c0383fc0603807038070700700038001c0381c07f8001f0700e001e70383f0e000000600e001c0e0003800380380383c703fc070380383807038381c0381c0383fc0403c07038070700700038001c0381c07f8000f0700e007070380f8e000001c00e001c0e0003800700380380fc0000070380383807070381c0381c0380000c01c07038070700700038001c0381c000020070700e00e07038078e000003800e001c0e0003800f00380381800000070380383807070381c0381c0380000c01c07038070700700038001c0381c000020070700e00e0703803ce000007000e001c070083800e02380383000000070380383807070381c0381c0380000c01e0703807070038043c021c0381c000020070700e00e0703801c7008006000e001c070183801c021c07030000000701c0703807070381c0381c0380001801e070380e0700380c1e061c0381c000030060700e00e0703801c701800c000e001c07c303803c060c06078000000700c06038070787c1c0381c0380001800e0703c0c07003e181f0c1c0381e0000380e0780e00f0f838c1c7c3001c010e001c03fe0380780e0f0c03ff80000700f0c0380703fbf1c0381c0380003800f0703e1807001ff00ff81c0381fc0003c1c07f0e007f7e38e383fe001fff7fc0ff80f80ff07ffe03f801ffe00007003f80ff3fc1e1e7f9fe7f9fe000fe03fdfc27f01fe007c003f07f9fe07800007f001e3fc03c3cfe7e00f8003fff00000000000000000000000301f0000e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060070000e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e0070003c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e007000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f00e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000781c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001fe00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000^FS^FO69,308^GFA,2542,2542,62,0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003fff00000000000000000000700000000000000000000000000000000000000000000000000000000000000000000000000007e000fc03fff00f8003e00007038000000000000000000070000000000000000000000000000000000000000000000000000000000000000000000000001c38038e03fff038e00e38000701c000000000000000000070000000000000000000000000000000000000000000000000000000000000000000000000003838070703ffe070701c1c000700e00000000000000000007000000000000000000000000000000000000000000000000000000000000000000000000000301c0e038600606038180e000700e00000000000000000007000000000000000000000000000000000000000000000000000000000000000000000000000301c0e03840040e038380e000700e00000000000000000007000000000000000000000000000000000000000000000000000000000000000000000000000001c0e038000c0e038380e000700e00000000000000000007000000000000000000000000000000000000000000000000000000000000000000000000000001c0e03800081c01c7007000700c038e03f01e03c0e1f007007e003f381f80000000000000000000000000000000000000000000000000000000000000000380e03800181c01c7007000701c0f9e0e383e07c3e7f80701c700e3f870c0000000000000000000000000000000000000000000000000000000000000000700707000101c01c7007000707803be1c1c0e01c0f87c07038381c1c060e000000000000000000000000000000000000000000000000000000000000000fc0038e000201c01c70070007fe003cc181c0e01c0f03c0703038380e0c0700000000000000000000000000000000000000000000000000000000000000003801fc000601c01c7007000707c0380181c0e01c0e01c0703038380e1c0700000000000000000000000000000000000000000000000000000000000000001c0707000401c01c7007000701e0380001c0e01c0e01c0700038380e1c0700000000000000000000000000000000000000000000000000000000000000001c0e03800c01c01c7007000700e0380007c0e01c0e01c07000f8380e1fff00000000000000000000000000000000000000000000000000000000000000000e0e03c01c01c01c700700070070380079c0e01c0e01c0700f381c1c1c0000000000000000000000000000000000000000000000000000000000000000000e1c01c01801c01c7007000700703801c1c0e01c0e01c07038381e381c0000000000000000000000000000000000000000000000000000000000000000000e1c01c03801c01c700700070070380381c0e01c0e01c070703807e01c0000000000000000000000000000000000000000000000000000000000000000200e1c01c03800e018380600070070380381c0e01c0e01c07070380c001c0000000000000000000000000000000000000000000000000000000000000000700e1c01c03800e038380e00070070380381c0e01c0e01c070703818000e0100000000000000000000000000000000000000000000000000000000000000700c0e01807800e038380e000700e0380381c0f03c0e01c07070383c000e0300000000000000000000000000000000000000000000000000000000000000781c0e0380780070701c1c000700e03803c3e0f87c0e01c070787c1ffc0f86000000000000000000000000000000000000000000000000000000000000003c38070700780038e00e38000783c03801fdf87f9c0e01c0703fbf1fff07fc000000000000000000000000000000000000000000000000000000000000000fe001fc0070000f8003e0003fff00ff00f0f03e1f3fcff1fc1e1e07ff01f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c0f800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000300380000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000070038000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007003800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000700300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000038070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e0e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000^FS^FO69,348^GFA,2542,2542,62,00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003fe0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c0f80000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030038000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006001800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000018000003f00e3870f83e001f8070f81fc3f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003800000e183e79f3fcff0071c1f3fc0700c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003800000c1c0ef87c1f8780e0e07c3e0700c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000380000180e0f30780f0780c0e0781e0380800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000380000380e0e00700e0380c0e0700e03818000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003801fe380e0e00700e038000e0700e01c10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003800383ffe0e00700e038003e0700e01c100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000038003838000e00700e03803ce0700e01c30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c003838000e00700e0380e0e0700e00e20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c003838000e00700e0381c0e0700e00e20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c003838000e00700e0381c0e0700e00760000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e00381c020e00700e0381c0e0700e00740000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f00381c060e00700e0381c0e0700e00740000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000780381f0c0e00700e0381e1f0700e003c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e0780ff80e00700e0380fefc700e0038000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007fc003e03fc1fe7f8fe07879fe7f803800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000074000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000078000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000^FS^FO607,231^GFA,506,506,22,0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000070000000000000078000000000000000fcf00000000030001ff80000000cb600000000000000304000000800300806080000000c3600000000000000308000001800301806080000000c00000000000000003301f1de3e3c31be0601de70ef1f3e3bc3d8f9db0000340318e318e632180610e398738c631c66318cfb00003c060cc318c6341807f0c318618c631866330cc000003e060cc318063c180610c318618c03186633fcc0000037060cc3183e3c180600c318618c1f18663300c0000033060cc318c636180600c318618c631861e300c0000031860cc318c633180604c318618c6318620304c0000030c318c318c63198060cc318730c6318660188c30000fc71f1e78e7f79ce1ff9e7bc7e1f3fbcf3f0f1f30000000000000000000000000000600000000218000000000000000000000000000000006000000006180000000000000000000000000000000060000000063800000000000000000000000000000000f000000003e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000^FS^FO607,251^GFA,506,506,22,000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c01c00000039c00c007000000000000000000000ffc0c00c001f9f98c00c0030000000000000000000003060000c00060618c0000030000000000000000000003030000c00060618c0000030000000000000000000003019cecc60060618cedc3e37800000000000000000003018c7cc80060618c7cc6738c00000000000000000003018c60d00060618c60cc230c00000000000000000003018c60f00060618c60cc030c00000000000000000003018c60f00060618c60cc030c00000000000000000003018c60d80060618c60cc030c00000000000000000003030c60cc0060618c60cc130c00000000000000000003060c60c60030c18c60c6230c0000000000000000000ff81ef9e7001f83def9e3c79e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000^FS^FO0,455^GB791,0,2,B^FS^FO0,519^GB791,0,2,B^FS^FT0,543^A0N,,21^FDAbrechnungsnr.: 62627359420101^FS^FT0,567^A0N,,21^FDReferenznr.: 218^FS^FT543,538^A0N,,17^FDGewicht:^FS^FT544,572^A0N,,34^FD5 kg^FS^FT543,572^A0N,,34^FD5 kg^FS^FT723,538^A0N,,17^FDAnzahl^FS^FT737,572^A0N,,34^FD1\\/1^FS^FT736,572^A0N,,34^FD1\\/1^FS^FT0,592^A0N,,21^FDSendungsnr.: 00340434162803530907^FS^FT0,592^A0N,,21^FDSendungsnr.: 00340434162803530907^FS^FO0,623^GB791,0,2,B^FS^FO0,862^GB791,0,2,B^FS^FO239,863^GB0,80,2,B^FS^FO559,863^GB0,80,2,B^FS^FO0,942^GB791,0,2,B^FS^FT0,968^A0N,,21^FDLeitcode\\/Routingcode^FS^FO71,983^BY3,2.3,208^BCN,208,N,N,N,D^FD40327638700+99000900082002^FS^FT252,1219^A0N,,21^FD(403)27638700+99000900082002^FS^FT0,1240^A0N,,21^FDIdentcode\\/License Plate^FS^FO92,1255^BY4,2.5,208^BCN,208,N,N,N,D^FD00340434162803530907^FS^FT284,1495^A0N,,21^FD(00)340434162803530907^FS^XZ";
        return label.getBytes();
    }

    private String getBatteryLabel(Battery battery) {
        String id = Integer.toString(battery.getId());
        String name = battery.getName();
        String manufacturer = battery.getoManufacturer().getName();
        String lku = battery.getoManufacturer().getcShortcut() + "-" + Integer.toString(battery.getLku());
        String lStorageName = battery.getlStockName();

        String label = "\u0010CT~~CD,~CC^~CT~\n" +
                "^XA\n" +
                "~TA000\n" +
                "~JSN\n" +
                "^LT0\n" +
                "^MNW\n" +
                "^MTT\n" +
                "^PON\n" +
                "^PMN\n" +
                "^LH0,0\n" +
                "^JMA\n" +
                "^PR6,6\n" +
                "~SD15\n" +
                "^JUS\n" +
                "^LRN\n" +
                "^CI27\n" +
                "^PA0,1,1,0\n" +
                "^XZ\n" +
                "^XA\n" +
                "^MMT\n" +
                "^PW408\n" +
                "^LL200\n" +
                "^LS0\n" +
                "^FPH,3^FT212,188^A@B,25,25,TT0003M_^FH\\^CI28^FDBATTERY^FS^CI27\n" +
                "^FPH,3^FT252,186^A@B,17,18,TT0003M_^FH\\^CI28^FD" + name + "^FS^CI27\n" +
                "^FPH,3^FT322,186^A@B,17,18,TT0003M_^FH\\^CI28^FD" + lku + "^FS^CI27\n" +
                "^FPH,3^FT345,186^A@B,14,13,TT0003M_^FH\\^CI28^FD" + lStorageName + "^FS^CI27\n" +
                "^FPH,3^FT275,186^A@B,14,13,TT0003M_^FH\\^CI28^FD" + manufacturer + "^FS^CI27\n" +
                "^BY2,3,20^FT387,186^BCB,,N,N\n" +
                "^FH\\^FD>:" + id + "^FS\n" +
                "^PQ1,0,1,Y\n" +
                "^XZ";

        return label;
    }

    private byte[] getBoxLabel(Box oBox) {

        String kBox = Integer.toString(oBox.getkId());

        String label = "\u0010CT~~CD,~CC^~CT~\n" +
                "^XA\n" +
                "~TA000\n" +
                "~JSN\n" +
                "^LT0\n" +
                "^MNW\n" +
                "^MTT\n" +
                "^PON\n" +
                "^PMN\n" +
                "^LH0,0\n" +
                "^JMA\n" +
                "^PR6,6\n" +
                "~SD15\n" +
                "^JUS\n" +
                "^LRN\n" +
                "^CI27\n" +
                "^PA0,1,1,0\n" +
                "^XZ\n" +
                "^XA\n" +
                "^MMT\n" +
                "^PW408\n" +
                "^LL200\n" +
                "^LS0\n" +
                "^FPH,3^FT19,62^A@N,39,38,TT0003M_^FH\\^CI28^FDBox - Erfassung^FS^CI27\n" +
                "^FO22,90^GFA,29,48,48,:Z64:eJxb1KWxiGi0gIEBAA9MFI0=:2CE5\n" +
                "^FPH,3^FT22,185^A@N,25,25,TT0003M_^FH\\^CI28^FDId: ^FS^CI27\n" +
                "^FPH,3^FT63,185^A@N,25,25,TT0003M_^FH\\^CI28^FD" + kBox + "e^FS^CI27\n" +
                "^BY3,3,32^FT22,147^BCN,,N,N\n" +
                "^FH\\^FD>:" + kBox + "e>68^FS\n" +
                "^PQ1,0,1,Y\n" +
                "^XZ\n";

        return label.getBytes();
    }

    private String getDeviceSku(Article oArticle, Device oDevice) {
        String cId = Integer.toString(oDevice.getIdDevice());
        String cSku = oArticle.getkSku();
        String cManufacturer = oDevice.getoModel().getoManufacturer().getName();
        String cModel = oDevice.getoModel().getName();

        String cNumber;
        String cTop;
        String cShape;

        if (oArticle.getkSku().substring(0, 1).equals("A")) {
            // New system
            String s = "A-5-Space Gray-64 GB-sehr gut";
            String s2 = "A-1-Schwarz-sehr gut";

            int indexPosition = cSku.indexOf("-");
            ArrayList<Integer> indexPositions = new ArrayList<>();
            while (indexPosition >= 0) {
                indexPositions.add(indexPosition);
                indexPosition = cSku.indexOf("-", indexPosition + 1);
            }
            cNumber = cSku.substring(0, indexPositions.get(1));
            if (indexPositions.size() > 3) {
                // With GB
                cTop = cSku.substring(indexPositions.get(1) + 1, indexPositions.get(3));
                cShape = cSku.substring(indexPositions.get(3) + 1);
            } else {
                // Without GB
                cTop = cSku.substring(indexPositions.get(1) + 1, indexPositions.get(2));
                cShape = cSku.substring(indexPositions.get(2) + 1);
            }
        } else {
            // Old system
            cTop = cSku;
            cNumber = "";
            cShape = "";
        }

        String labelNew = "\u0010CT~~CD,~CC^~CT~\n" +
                "^XA\n" +
                "~TA000\n" +
                "~JSN\n" +
                "^LT0\n" +
                "^MNW\n" +
                "^MTT\n" +
                "^PON\n" +
                "^PMN\n" +
                "^LH0,0\n" +
                "^JMA\n" +
                "^PR6,6\n" +
                "~SD15\n" +
                "^JUS\n" +
                "^LRN\n" +
                "^CI27\n" +
                "^PA0,1,1,0\n" +
                "^XZ\n" +
                "^XA\n" +
                "^MMT\n" +
                "^PW448\n" +
                "^LL607\n" +
                "^LS0\n" +
                "^FO386,20^GB0,584,1^FS\n" +
                "^FO117,18^GFA,57,2344,4,:Z64:eJxjYGBgaGCAABjNgMYfFR8VHxUfFR8VHxUfFR8VH4niAMtoYgE=:D29D\n" +
                "^FO343,18^GFA,57,2344,4,:Z64:eJxjYGBgaGCAABjNgMYfFR8VHxUfFR8VHxUfFR8VH4niAMtoYgE=:D29D\n" +
                "^BY2,3,27^FT432,584^BCB,,N,N\n" +
                "^FH\\^FD>:" + cId + ">63^FS\n" +
                "^FT157,248^BQN,2,6\n" +
                "^FH\\^FDLA," + cSku + "^FS\n" +
                "^FPH,3^FT75,584^A@B,45,45,TT0003M_^FH\\^CI28^FD" + cTop + "^FS^CI27\n" +
                "^FPH,8^FT228,584^A@B,79,79,TT0003M_^FH\\^CI28^FD" + cNumber + "^FS^CI27\n" +
                "^FPH,3^FT295,584^A@B,45,45,TT0003M_^FH\\^CI28^FD" + cShape + "^FS^CI27\n" +
                "^FPH,3^FT372,584^A@B,20,20,TT0003M_^FH\\^CI28^FD" + cManufacturer + " | " + cModel + "^FS^CI27\n" +
                "^PQ1,0,1,Y\n" +
                "^XZ\n";

        String label = "\u0010CT~~CD,~CC^~CT~\n" +
                "^XA\n" +
                "~TA000\n" +
                "~JSN\n" +
                "^LT0\n" +
                "^MNW\n" +
                "^MTT\n" +
                "^PON\n" +
                "^PMN\n" +
                "^LH0,0\n" +
                "^JMA\n" +
                "^PR6,6\n" +
                "~SD15\n" +
                "^JUS\n" +
                "^LRN\n" +
                "^CI27\n" +
                "^PA0,1,1,0\n" +
                "^XZ\n" +
                "^XA\n" +
                "^MMT\n" +
                "^PW448\n" +
                "^LL607\n" +
                "^LS0\n" +
                "^FO386,20^GB0,584,1^FS\n" +
                "^FO117,18^GFA,57,2344,4,:Z64:eJxjYGBgaGCAABjNgMYfFR8VHxUfFR8VHxUfFR8VH4niAMtoYgE=:D29D\n" +
                "^FO343,18^GFA,57,2344,4,:Z64:eJxjYGBgaGCAABjNgMYfFR8VHxUfFR8VHxUfFR8VH4niAMtoYgE=:D29D\n" +
                "^BY2,3,27^FT432,519^BCB,,N,N\n" +
                "^FH\\^FD>:" + cId + ">63^FS\n" +
                "^FT164,255^BQN,2,6\n" +
                "^FH\\^FDLA," + cSku + "^FS\n" +
                "^FPH,3^FT69,519^A@B,39,38,TT0003M_^FH\\^CI28^FD" + cTop + "^FS^CI27\n" +
                "^FPH,8^FT228,519^A@B,79,79,TT0003M_^FH\\^CI28^FD" + cNumber + "^FS^CI27\n" +
                "^FPH,3^FT287,519^A@B,37,36,TT0003M_^FH\\^CI28^FD" + cShape + "^FS^CI27\n" +
                "^FPH,3^FT372,519^A@B,20,20,TT0003M_^FH\\^CI28^FD" + cManufacturer + " | " + cModel + "^FS^CI27\n" +
                "^PQ1,0,1,Y\n" +
                "^XZ\n";

        return label;
    }

    private String getDeviceLabel(Device device) {
        String idDevice = Integer.toString(device.getIdDevice());
        String cModelName = device.getoModel().getName();
        String shape = device.getoShape().getName();
        String cState = device.getStateName();
        String lkuBattery;
        if (device.getoModel().getoBattery() != null && device.getoModel().getoBattery().getLku() != null) {
            Battery battery = device.getoModel().getoBattery();
            lkuBattery = battery.getoManufacturer().getcShortcut() + "-" + Integer.toString(battery.getLku());
        } else {
            lkuBattery = "-";
        }
        String cClass = device.getoModel().getClassString();
        String cCharger = device.getoModel().getoCharger().getName();


        String labelOld = "\u0010CT~~CD,~CC^~CT~\n" +
                "^XA\n" +
                "~TA000\n" +
                "~JSN\n" +
                "^LT0\n" +
                "^MNW\n" +
                "^MTT\n" +
                "^PON\n" +
                "^PMN\n" +
                "^LH0,0\n" +
                "^JMA\n" +
                "^PR6,6\n" +
                "~SD15\n" +
                "^JUS\n" +
                "^LRN\n" +
                "^CI27\n" +
                "^PA0,1,1,0\n" +
                "^XZ\n" +
                "^XA\n" +
                "^MMT\n" +
                "^PW408\n" +
                "^LL200\n" +
                "^LS0\n" +
                "^FO17,80^GFA,25,48,48,:Z64:eJxb1KWxiATEAAAQZhUZ:FC47\n" +
                "^FO15,120^GFA,25,48,48,:Z64:eJxb1KWxiASkAAAQhhU5:68FE\n" +
                "^FO264,52^GFA,37,560,4,:Z64:eJxrYICABgZU0DAqPiqORRwAQ7YXgQ==:D9B6\n" +
                "^FO17,159^GFA,25,48,48,:Z64:eJxb1KWxiATEAAAQZhUZ:FC47\n" +
                "^FPH,3^FT284,68^A@N,17,18,TT0003M_^FH\\^CI28^FD" + idDevice + "^FS^CI27\n" +
                "^FPH,3^FT21,147^A@N,17,18,TT0003M_^FH\\^CI28^FD" + shape + "^FS^CI27\n" +
                "^FPH,3^FT284,147^A@N,17,18,TT0003M_^FH\\^CI28^FD" + lkuBattery + "^FS^CI27\n" +
                "^FPH,3^FT21,108^A@N,17,18,TT0003M_^FH\\^CI28^FD" + cState + "^FS^CI27\n" +
                "^BY2,3,16^FT21,38^BCN,,N,N\n" +
                "^FH\\^FD>:" + idDevice + "^FS\n" +
                "^FPH,3^FT21,188^A@N,17,18,TT0003M_^FH\\^CI28^FD" + cCharger + "^FS^CI27\n" +
                "^FPH,3^FT284,108^A@N,17,18,TT0003M_^FH\\^CI28^FD-^FS^CI27\n" +
                "^FPH,3^FT285,189^A@N,23,22,TT0003M_^FH\\^CI28^FD" + cClass + "^FS^CI27\n" +
                "^FPH,3^FT21,68^A@N,17,18,TT0003M_^FH\\^CI28^FD" + cModelName + "^FS^CI27\n" +
                "^PQ1,0,1,Y\n" +
                "^XZ\n";

        String label = "\u0010CT~~CD,~CC^~CT~\n" +
                "^XA\n" +
                "~TA000\n" +
                "~JSN\n" +
                "^LT0\n" +
                "^MNW\n" +
                "^MTT\n" +
                "^PON\n" +
                "^PMN\n" +
                "^LH0,0\n" +
                "^JMA\n" +
                "^PR6,6\n" +
                "~SD15\n" +
                "^JUS\n" +
                "^LRN\n" +
                "^CI27\n" +
                "^PA0,1,1,0\n" +
                "^XZ\n" +
                "^XA\n" +
                "^MMT\n" +
                "^PW408\n" +
                "^LL200\n" +
                "^LS0\n" +
                "^FO17,80^GFA,25,48,48,:Z64:eJxb1KWxiATEAAAQZhUZ:FC47\n" +
                "^FO15,120^GFA,25,48,48,:Z64:eJxb1KWxiASkAAAQhhU5:68FE\n" +
                "^FO264,52^GFA,37,560,4,:Z64:eJxrYICABgZU0DAqPiqORRwAQ7YXgQ==:D9B6\n" +
                "^FO17,159^GFA,25,48,48,:Z64:eJxb1KWxiATEAAAQZhUZ:FC47\n" +
                "^FPH,3^FT284,72^A@N,28,27,TT0003M_^FH\\^CI28^FD" + idDevice + "^FS^CI27\n" +
                "^FPH,3^FT21,147^A@N,17,18,TT0003M_^FH\\^CI28^FD" + shape + "^FS^CI27\n" +
                "^FPH,3^FT284,147^A@N,17,18,TT0003M_^FH\\^CI28^FD" + lkuBattery + "^FS^CI27\n" +
                "^FPH,3^FT21,108^A@N,17,18,TT0003M_^FH\\^CI28^FD" + cState + "^FS^CI27\n" +
                "^BY2,3,16^FT21,38^BCN,,N,N\n" +
                "^FH\\^FD>:" + idDevice + ">68^FS\n" +
                "^FPH,3^FT21,188^A@N,17,18,TT0003M_^FH\\^CI28^FD" + cCharger + "^FS^CI27\n" +
                "^FPH,3^FT284,108^A@N,17,18,TT0003M_^FH\\^CI28^FD-^FS^CI27\n" +
                "^FPH,3^FT285,189^A@N,23,22,TT0003M_^FH\\^CI28^FD" + cClass + "^FS^CI27\n" +
                "^FPH,3^FT21,68^A@N,17,18,TT0003M_^FH\\^CI28^FD" + cModelName + "^FS^CI27\n" +
                "^PQ1,0,1,Y\n" +
                "^XZ\n";

        return label;
    }

    private boolean readyToPrint() {

        boolean isReady = true;
        try {
            ZebraPrinterLinkOs linkOsPrinter = ZebraPrinterFactory.createLinkOsPrinter(Printer);
            PrinterStatus printerStatus = (linkOsPrinter != null) ? linkOsPrinter.getCurrentStatus() : Printer.getCurrentStatus();
            if (printerStatus.isReadyToPrint) {
                isReady = true;
            } else {
                if (printerStatus.isHeadOpen) {
                    Toast.makeText(Context, Context.getString(R.string.printer_head_open), Toast.LENGTH_LONG).show();
                } else if (printerStatus.isPaused) {
                    Toast.makeText(Context, Context.getString(R.string.printer_paused), Toast.LENGTH_LONG).show();
                } else if (printerStatus.isPaperOut) {
                    Toast.makeText(Context, Context.getString(R.string.printer_paper_out), Toast.LENGTH_LONG).show();
                }
                isReady = false;
            }
        } catch (ConnectionException e) {
            e.printStackTrace();
        }
        return isReady;
    }

    public void connect() {
        new Thread(new Runnable() {
            public void run() {
                Connection = null;
                try {
                    Connection = ConnectionBuilder.build(SharedPreferences.getString(Constants_Intern.SELECTED_PRINTER_IP, Constants_Intern.ID_PRINTER_ONE_IP) + ":6101");
                } catch (Exception e) {
                    e.printStackTrace();
                }
                if (Connection == null) {
                    try {
                        Connection = new BluetoothLeConnection(SharedPreferences.getString(Constants_Intern.SELECTED_PRINTER_BT, Constants_Intern.ID_PRINTER_ONE_BT), Context);
                    } catch (Exception e2) {
                        e2.printStackTrace();
                    }
                }
                try {
                    Connection.open();
                    DemoSleeper.sleep(1500);
                } catch (Exception e) {
                    e.printStackTrace();
                    disconnect();
                    DemoSleeper.sleep(1500);
                    return;
                }

                Printer = null;
                if (Connection.isConnected()) {
                    try {
                        Printer = ZebraPrinterFactory.getInstance(Connection);
                    } catch (ConnectionException e) {
                        Printer = null;
                        disconnect();
                        DemoSleeper.sleep(2000);
                    } catch (ZebraPrinterLanguageUnknownException e) {
                        Printer = null;
                        disconnect();
                        DemoSleeper.sleep(2000);
                    }
                }
            }
        }).start();


    }

    public static boolean usePrinter(Context context) {
        return context.getSharedPreferences(Constants_Intern.SHARED_PREFERENCES, 0).getBoolean(Constants_Intern.USE_PRINTER, false);
    }

    public static void usePrinter(Context context, boolean bUsePrinter) {
        context.getSharedPreferences(Constants_Intern.SHARED_PREFERENCES, 0).edit().putBoolean(Constants_Intern.USE_PRINTER, bUsePrinter).commit();
    }

    public void printDhlLabel(final String label) {
        printLabel(label);
        /*
        if (Connection != null && Printer != null) {
            new Thread(new Runnable() {
                public void run() {
                    try {
                        ZebraPrinterLinkOs linkOsPrinter = ZebraPrinterFactory.createLinkOsPrinter(Printer);
                        PrinterStatus printerStatus = (linkOsPrinter != null) ? linkOsPrinter.getCurrentStatus() : Printer.getCurrentStatus();

                        if (printerStatus.isReadyToPrint) {
                            byte[] configLabel = label.getBytes();
                            Connection.write(configLabel);
                        } else if (printerStatus.isHeadOpen) {
                            //setStatus("Printer Head Open", Color.RED);
                        } else if (printerStatus.isPaused) {
                            //setStatus("Printer is Paused", Color.RED);
                        } else if (printerStatus.isPaperOut) {
                            //setStatus("Printer Media Out", Color.RED);
                        }
                        DemoSleeper.sleep(1500);
                    } catch (ConnectionException e) {
                        e.printStackTrace();
                    } finally {
                    }
                }
            }).start();
        }
        */
    }

    private void printLabel(final String label) {
        if (Connection != null && Printer != null) {
            new Thread(new Runnable() {
                public void run() {
                    try {
                        ZebraPrinterLinkOs linkOsPrinter = ZebraPrinterFactory.createLinkOsPrinter(Printer);
                        PrinterStatus printerStatus = null;
                        try {
                            if (linkOsPrinter != null) {
                                printerStatus = linkOsPrinter.getCurrentStatus();
                            }
                        } catch (NullPointerException e) {
                            Log.i("Multiple print", "Wait 2 seconds");
                            e.printStackTrace();
                            DemoSleeper.sleep(2000);
                            if (linkOsPrinter != null) {
                                printerStatus = linkOsPrinter.getCurrentStatus();
                            }
                        }

                        if (printerStatus != null) {
                            if (printerStatus.isReadyToPrint) {
                                byte[] configLabel = label.getBytes();
                                try {
                                    Connection.write(configLabel);
                                } catch (Exception e) {
                                    Log.i("PrinterHint", "Error while printing (status checked): " + e.getMessage());
                                    e.printStackTrace();
                                    disconnect();
                                    DemoSleeper.sleep(2000);
                                    connect();
                                    DemoSleeper.sleep(2000);
                                    configLabel = label.getBytes();
                                    try {
                                        Connection.write(configLabel);
                                    } catch (ConnectionException ex) {
                                        ex.printStackTrace();
                                    }
                                }
                            }
                        } else {
                            byte[] configLabel = label.getBytes();
                            try {
                                Log.i("PrinterHint", "Connection was closed and will be opened");
                                disconnect();
                                DemoSleeper.sleep(2000);
                                connect();
                                DemoSleeper.sleep(2000);
                                Connection.write(configLabel);
                                Log.i("PrinterHint", "Printing without checking status: ");
                            } catch (Exception e) {
                                Log.i("PrinterHint", "Error while printing (status not checked): " + e.getMessage());
                                e.printStackTrace();
                                disconnect();
                                DemoSleeper.sleep(2000);
                                connect();
                                DemoSleeper.sleep(2000);
                                configLabel = label.getBytes();
                                try {
                                    Connection.write(configLabel);
                                } catch (ConnectionException ex) {
                                    ex.printStackTrace();
                                }
                            }
                        }
                        /*else if (printerStatus.isHeadOpen) {
                            Log.i("PrinterHint", "Head open");
                            //setStatus("Printer Head Open", Color.RED);
                        } else if (printerStatus.isPaused) {
                            Log.i("PrinterHint", "Printer is paused");
                            //setStatus("Printer is Paused", Color.RED);
                        } else if (printerStatus.isPaperOut) {
                            Log.i("PrinterHint", "Paper out");
                            //setStatus("Printer Media Out", Color.RED);
                        } else {
                            Log.i("PrinterHint", "Printer not ready");
                        }
                         */
                    } catch (ConnectionException e) {
                        Log.i("PrinterHint", "Error while checking printer status: " + e.getMessage());
                        e.printStackTrace();
                        disconnect();
                        DemoSleeper.sleep(2000);
                        connect();
                        DemoSleeper.sleep(2000);
                        byte[] configLabel = label.getBytes();
                        try {
                            Connection.write(configLabel);
                        } catch (ConnectionException ex) {
                            ex.printStackTrace();
                        }
                    } finally {

                    }
                }

            }).start();
        } else {
            if (Connection == null) {
                Utility_Toast.showString(Context, "Connection null");
            }
            if (Printer == null) {
                Utility_Toast.showString(Context, "Printer null");
            }

        }
    }
}
